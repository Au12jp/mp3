"use strict";(()=>{var Y=Object.defineProperty;var g=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var T=e=>{throw TypeError(e)};var $=(e,t,r)=>t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var N=(e,t)=>{var r={};for(var n in e)F.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&g)for(var n of g(e))t.indexOf(n)<0&&X.call(e,n)&&(r[n]=e[n]);return r};var p=(e,t)=>()=>(e&&(t=e(e=0)),t);var z=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var i=(e,t,r)=>$(e,typeof t!="symbol"?t+"":t,r),U=(e,t,r)=>t.has(e)||T("Cannot "+r);var o=(e,t,r)=>(U(e,t,"read from private field"),r?r.call(e):t.get(e)),u=(e,t,r)=>t.has(e)?T("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),I=(e,t,r,n)=>(U(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);var w=(e,t,r)=>new Promise((n,a)=>{var c=h=>{try{f(r.next(h))}catch(A){a(A)}},l=h=>{try{f(r.throw(h))}catch(A){a(A)}},f=h=>h.done?n(h.value):Promise.resolve(h.value).then(c,l);f((r=r.apply(e,t)).next())});var J,ot,s,b=p(()=>{J="0.12.6",ot=`https://unpkg.com/@ffmpeg/core@${J}/dist/umd/ffmpeg-core.js`;(function(e){e.LOAD="LOAD",e.EXEC="EXEC",e.WRITE_FILE="WRITE_FILE",e.READ_FILE="READ_FILE",e.DELETE_FILE="DELETE_FILE",e.RENAME="RENAME",e.CREATE_DIR="CREATE_DIR",e.LIST_DIR="LIST_DIR",e.DELETE_DIR="DELETE_DIR",e.ERROR="ERROR",e.DOWNLOAD="DOWNLOAD",e.PROGRESS="PROGRESS",e.LOG="LOG",e.MOUNT="MOUNT",e.UNMOUNT="UNMOUNT"})(s||(s={}))});var B,x=p(()=>{B=(()=>{let e=0;return()=>e++})()});var it,C,M,Et,S=p(()=>{it=new Error("unknown message type"),C=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),M=new Error("called FFmpeg.terminate()"),Et=new Error("failed to import ffmpeg-core.js")});var P,d,m,R,L,O,_,E,D,k=p(()=>{b();x();S();P={},D=class{constructor(){u(this,d,null);u(this,m,{});u(this,R,{});u(this,L,[]);u(this,O,[]);i(this,"loaded",!1);u(this,_,()=>{o(this,d)&&(o(this,d).onmessage=({data:{id:t,type:r,data:n}})=>{switch(r){case s.LOAD:this.loaded=!0,o(this,m)[t](n);break;case s.MOUNT:case s.UNMOUNT:case s.EXEC:case s.WRITE_FILE:case s.READ_FILE:case s.DELETE_FILE:case s.RENAME:case s.CREATE_DIR:case s.LIST_DIR:case s.DELETE_DIR:o(this,m)[t](n);break;case s.LOG:o(this,L).forEach(a=>a(n));break;case s.PROGRESS:o(this,O).forEach(a=>a(n));break;case s.ERROR:o(this,R)[t](n);break}delete o(this,m)[t],delete o(this,R)[t]})});u(this,E,({type:t,data:r},n=[],a)=>o(this,d)?new Promise((c,l)=>{let f=B();o(this,d)&&o(this,d).postMessage({id:f,type:t,data:r},n),o(this,m)[f]=c,o(this,R)[f]=l,a==null||a.addEventListener("abort",()=>{l(new DOMException(`Message # ${f} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(C));i(this,"load",(a={},{signal:n}={})=>{var c=a,{classWorkerURL:t}=c,r=N(c,["classWorkerURL"]);return o(this,d)||(I(this,d,t?new Worker(new URL(t,P.url),{type:"module"}):new Worker(new URL("./worker.js",P.url),{type:"module"})),o(this,_).call(this)),o(this,E).call(this,{type:s.LOAD,data:r},void 0,n)});i(this,"exec",(t,r=-1,{signal:n}={})=>o(this,E).call(this,{type:s.EXEC,data:{args:t,timeout:r}},void 0,n));i(this,"terminate",()=>{let t=Object.keys(o(this,R));for(let r of t)o(this,R)[r](M),delete o(this,R)[r],delete o(this,m)[r];o(this,d)&&(o(this,d).terminate(),I(this,d,null),this.loaded=!1)});i(this,"writeFile",(t,r,{signal:n}={})=>{let a=[];return r instanceof Uint8Array&&a.push(r.buffer),o(this,E).call(this,{type:s.WRITE_FILE,data:{path:t,data:r}},a,n)});i(this,"mount",(t,r,n)=>{let a=[];return o(this,E).call(this,{type:s.MOUNT,data:{fsType:t,options:r,mountPoint:n}},a)});i(this,"unmount",t=>{let r=[];return o(this,E).call(this,{type:s.UNMOUNT,data:{mountPoint:t}},r)});i(this,"readFile",(t,r="binary",{signal:n}={})=>o(this,E).call(this,{type:s.READ_FILE,data:{path:t,encoding:r}},void 0,n));i(this,"deleteFile",(t,{signal:r}={})=>o(this,E).call(this,{type:s.DELETE_FILE,data:{path:t}},void 0,r));i(this,"rename",(t,r,{signal:n}={})=>o(this,E).call(this,{type:s.RENAME,data:{oldPath:t,newPath:r}},void 0,n));i(this,"createDir",(t,{signal:r}={})=>o(this,E).call(this,{type:s.CREATE_DIR,data:{path:t}},void 0,r));i(this,"listDir",(t,{signal:r}={})=>o(this,E).call(this,{type:s.LIST_DIR,data:{path:t}},void 0,r));i(this,"deleteDir",(t,{signal:r}={})=>o(this,E).call(this,{type:s.DELETE_DIR,data:{path:t}},void 0,r))}on(t,r){t==="log"?o(this,L).push(r):t==="progress"&&o(this,O).push(r)}off(t,r){t==="log"?I(this,L,o(this,L).filter(n=>n!==r)):t==="progress"&&I(this,O,o(this,O).filter(n=>n!==r))}};d=new WeakMap,m=new WeakMap,R=new WeakMap,L=new WeakMap,O=new WeakMap,_=new WeakMap,E=new WeakMap});var v=p(()=>{k()});var K,Z,W=p(()=>{K=new Error("failed to get response body reader"),Z=new Error("failed to complete download")});var j=p(()=>{});var q,H,G=p(()=>{W();j();q=e=>new Promise((t,r)=>{let n=new FileReader;n.onload=()=>{let{result:a}=n;a instanceof ArrayBuffer?t(new Uint8Array(a)):t(new Uint8Array)},n.onerror=a=>{var c,l;r(Error(`File could not be read! Code=${((l=(c=a==null?void 0:a.target)==null?void 0:c.error)==null?void 0:l.code)||-1}`))},n.readAsArrayBuffer(e)}),H=e=>w(void 0,null,function*(){let t;if(typeof e=="string")/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(e)?t=atob(e.split(",")[1]).split("").map(r=>r.charCodeAt(0)):t=yield(yield fetch(e)).arrayBuffer();else if(e instanceof URL)t=yield(yield fetch(e)).arrayBuffer();else if(e instanceof File||e instanceof Blob)t=yield q(e);else return new Uint8Array;return new Uint8Array(t)})});var rt=z(V=>{v();G();var y=document.getElementById("fileInput"),Q=document.getElementById("trimButton"),tt=document.getElementById("videoOutput");Q.addEventListener("click",()=>w(V,null,function*(){if(!y.files||y.files.length===0){alert("\u307E\u305A\u52D5\u753B\u30D5\u30A1\u30A4\u30EB\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044\u3002");return}let e=document.getElementById("start").value,t=document.getElementById("end").value,r=yield et(y.files[0],e,t);r&&(tt.src=r)}));function et(e,t,r){return w(this,null,function*(){let n=new D;yield n.load(),yield n.writeFile("input.mp4",yield H(e));let a=(parseInt(r)-parseInt(t)).toString();yield n.exec(["-i","input.mp4","-ss",t,"-t",a,"output.mp4"]);let c=yield n.readFile("output.mp4"),l=new Blob([new Uint8Array(c)],{type:"video/mp4"});return URL.createObjectURL(l)})}});rt();})();
//# sourceMappingURL=main.js.map
