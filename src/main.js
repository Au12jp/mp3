"use strict";(()=>{var p=(e,t)=>()=>(e&&(t=e(e=0)),t);var h=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var c=(e,t,r)=>new Promise((n,o)=>{var a=i=>{try{d(r.next(i))}catch(m){o(m)}},s=i=>{try{d(r.throw(i))}catch(m){o(m)}},d=i=>i.done?n(i.value):Promise.resolve(i.value).then(a,s);d((r=r.apply(e,t)).next())});var L,B,u=p(()=>{L=new Error("failed to get response body reader"),B=new Error("failed to complete download")});var f=p(()=>{});var F,y,w=p(()=>{u();f();F=e=>new Promise((t,r)=>{let n=new FileReader;n.onload=()=>{let{result:o}=n;o instanceof ArrayBuffer?t(new Uint8Array(o)):t(new Uint8Array)},n.onerror=o=>{var a,s;r(Error(`File could not be read! Code=${((s=(a=o==null?void 0:o.target)==null?void 0:a.error)==null?void 0:s.code)||-1}`))},n.readAsArrayBuffer(e)}),y=e=>c(void 0,null,function*(){let t;if(typeof e=="string")/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(e)?t=atob(e.split(",")[1]).split("").map(r=>r.charCodeAt(0)):t=yield(yield fetch(e)).arrayBuffer();else if(e instanceof URL)t=yield(yield fetch(e)).arrayBuffer();else if(e instanceof File||e instanceof Blob)t=yield F(e);else return new Uint8Array;return new Uint8Array(t)})});var T=h(R=>{w();var E=new Worker("./core-mt/worker.js"),g=document.getElementById("fileInput"),O=document.getElementById("trimButton"),I=document.getElementById("videoOutput"),b=document.getElementById("progress"),A=document.getElementById("timeRemaining");function l(e,t=[]){return new Promise((r,n)=>{E.postMessage({command:e,args:t}),E.onmessage=o=>{if(o.data.status==="error")n(o.data.message);else if(o.data.status==="progress"){let{percent:a,estimatedRemainingTime:s}=o.data;b.style.width=`${a}%`,A.innerText=`Estimated Time Left: ${s}s`}else r(o.data.result)}})}function v(){return c(this,null,function*(){try{console.log("Loading FFmpeg..."),yield l("load"),console.log("FFmpeg loaded.")}catch(e){console.error("Error loading FFmpeg:",e)}})}function D(e,t,r){return c(this,null,function*(){console.log("Sending video trimming command to worker...");let n=yield y(e),o=(parseInt(r)-parseInt(t)).toString(),a=["-i","input.mp4","-ss",t,"-t",o,"output.mp4"];console.log("Writing file to FFmpeg..."),yield l("writeFile",["input.mp4",n]),console.log("Running FFmpeg..."),yield l("run",a),console.log("Reading output file from FFmpeg...");let s=yield l("readFile",["output.mp4"]),d=new Blob([new Uint8Array(s)],{type:"video/mp4"});return URL.createObjectURL(d)})}O.addEventListener("click",()=>c(R,null,function*(){if(!g.files||g.files.length===0){alert("Please select a video file.");return}console.log("Starting trimming process...");let e=document.getElementById("start").value,t=document.getElementById("end").value;try{let r=yield D(g.files[0],e,t);I.src=r}catch(r){console.error("Error during video trimming:",r)}}));v().catch(console.error)});T();})();
//# sourceMappingURL=main.js.map
