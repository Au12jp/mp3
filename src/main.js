"use strict";(()=>{var u=(e,t)=>()=>(e&&(t=e(e=0)),t);var R=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var d=(e,t,r)=>new Promise((n,o)=>{var s=a=>{try{c(r.next(a))}catch(m){o(m)}},i=a=>{try{c(r.throw(a))}catch(m){o(m)}},c=a=>a.done?n(a.value):Promise.resolve(a.value).then(s,i);c((r=r.apply(e,t)).next())});var L,B,f=u(()=>{L=new Error("failed to get response body reader"),B=new Error("failed to complete download")});var g=u(()=>{});var F,w,y=u(()=>{f();g();F=e=>new Promise((t,r)=>{let n=new FileReader;n.onload=()=>{let{result:o}=n;o instanceof ArrayBuffer?t(new Uint8Array(o)):t(new Uint8Array)},n.onerror=o=>{var s,i;r(Error(`File could not be read! Code=${((i=(s=o==null?void 0:o.target)==null?void 0:s.error)==null?void 0:i.code)||-1}`))},n.readAsArrayBuffer(e)}),w=e=>d(void 0,null,function*(){let t;if(typeof e=="string")/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(e)?t=atob(e.split(",")[1]).split("").map(r=>r.charCodeAt(0)):t=yield(yield fetch(e)).arrayBuffer();else if(e instanceof URL)t=yield(yield fetch(e)).arrayBuffer();else if(e instanceof File||e instanceof Blob)t=yield F(e);else return new Uint8Array;return new Uint8Array(t)})});var k=R(h=>{y();var E=new Worker("./core-mt/worker.js"),p=document.getElementById("fileInput"),O=document.getElementById("trimButton"),b=document.getElementById("videoOutput");function l(e,t=[]){return new Promise((r,n)=>{E.postMessage({command:e,args:t}),E.onmessage=o=>{o.data.status==="error"?n(o.data.message):r(o.data.result)}})}function A(){return d(this,null,function*(){try{console.log("Loading FFmpeg..."),yield l("load"),console.log("FFmpeg loaded.")}catch(e){console.error("Error loading FFmpeg:",e)}})}function I(e,t,r){return d(this,null,function*(){console.log("Sending video trimming command to worker...");let n=yield w(e),o=(parseInt(r)-parseInt(t)).toString(),s=["-i","input.mp4","-ss",t,"-t",o,"output.mp4"];yield l("writeFile",["input.mp4",n]),yield l("run",[s]);let i=yield l("readFile",["output.mp4"]),c=new Blob([new Uint8Array(i)],{type:"video/mp4"});return URL.createObjectURL(c)})}O.addEventListener("click",()=>d(h,null,function*(){if(!p.files||p.files.length===0){alert("Please select a video file.");return}let e=document.getElementById("start").value,t=document.getElementById("end").value;try{let r=yield I(p.files[0],e,t);b.src=r}catch(r){console.error("Error during video trimming:",r)}}));A().catch(console.error)});k();})();
//# sourceMappingURL=main.js.map
