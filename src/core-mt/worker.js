"use strict";(()=>{var Z=Object.defineProperty;var x=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var C=t=>{throw TypeError(t)};var ee=(t,e,r)=>e in t?Z(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var M=(t,e)=>{var r={};for(var o in t)q.call(t,o)&&e.indexOf(o)<0&&(r[o]=t[o]);if(t!=null&&x)for(var o of x(t))e.indexOf(o)<0&&Q.call(t,o)&&(r[o]=t[o]);return r};var p=(t,e)=>()=>(t&&(e=t(t=0)),e);var te=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var E=(t,e,r)=>ee(t,typeof e!="symbol"?e+"":e,r),k=(t,e,r)=>e.has(t)||C("Cannot "+r);var s=(t,e,r)=>(k(t,e,"read from private field"),r?r.call(t):e.get(t)),h=(t,e,r)=>e.has(t)?C("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),I=(t,e,r,o)=>(k(t,e,"write to private field"),o?o.call(t,r):e.set(t,r),r);var _=(t,e,r)=>new Promise((o,n)=>{var i=d=>{try{R(r.next(d))}catch(O){n(O)}},L=d=>{try{R(r.throw(d))}catch(O){n(O)}},R=d=>d.done?o(d.value):Promise.resolve(d.value).then(i,L);R((r=r.apply(t,e)).next())});var re,ie,a,S=p(()=>{re="0.12.6",ie=`https://unpkg.com/@ffmpeg/core@${re}/dist/umd/ffmpeg-core.js`;(function(t){t.LOAD="LOAD",t.EXEC="EXEC",t.WRITE_FILE="WRITE_FILE",t.READ_FILE="READ_FILE",t.DELETE_FILE="DELETE_FILE",t.RENAME="RENAME",t.CREATE_DIR="CREATE_DIR",t.LIST_DIR="LIST_DIR",t.DELETE_DIR="DELETE_DIR",t.ERROR="ERROR",t.DOWNLOAD="DOWNLOAD",t.PROGRESS="PROGRESS",t.LOG="LOG",t.MOUNT="MOUNT",t.UNMOUNT="UNMOUNT"})(a||(a={}))});var P,j=p(()=>{P=(()=>{let t=0;return()=>t++})()});var de,B,v,fe,W=p(()=>{de=new Error("unknown message type"),B=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),v=new Error("called FFmpeg.terminate()"),fe=new Error("failed to import ffmpeg-core.js")});var F,f,m,l,u,w,N,c,y,$=p(()=>{S();j();W();F={},y=class{constructor(){h(this,f,null);h(this,m,{});h(this,l,{});h(this,u,[]);h(this,w,[]);E(this,"loaded",!1);h(this,N,()=>{s(this,f)&&(s(this,f).onmessage=({data:{id:e,type:r,data:o}})=>{switch(r){case a.LOAD:this.loaded=!0,s(this,m)[e](o);break;case a.MOUNT:case a.UNMOUNT:case a.EXEC:case a.WRITE_FILE:case a.READ_FILE:case a.DELETE_FILE:case a.RENAME:case a.CREATE_DIR:case a.LIST_DIR:case a.DELETE_DIR:s(this,m)[e](o);break;case a.LOG:s(this,u).forEach(n=>n(o));break;case a.PROGRESS:s(this,w).forEach(n=>n(o));break;case a.ERROR:s(this,l)[e](o);break}delete s(this,m)[e],delete s(this,l)[e]})});h(this,c,({type:e,data:r},o=[],n)=>s(this,f)?new Promise((i,L)=>{let R=P();s(this,f)&&s(this,f).postMessage({id:R,type:e,data:r},o),s(this,m)[R]=i,s(this,l)[R]=L,n==null||n.addEventListener("abort",()=>{L(new DOMException(`Message # ${R} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(B));E(this,"load",(n={},{signal:o}={})=>{var i=n,{classWorkerURL:e}=i,r=M(i,["classWorkerURL"]);return s(this,f)||(I(this,f,e?new Worker(new URL(e,F.url),{type:"module"}):new Worker(new URL("./worker.js",F.url),{type:"module"})),s(this,N).call(this)),s(this,c).call(this,{type:a.LOAD,data:r},void 0,o)});E(this,"exec",(e,r=-1,{signal:o}={})=>s(this,c).call(this,{type:a.EXEC,data:{args:e,timeout:r}},void 0,o));E(this,"terminate",()=>{let e=Object.keys(s(this,l));for(let r of e)s(this,l)[r](v),delete s(this,l)[r],delete s(this,m)[r];s(this,f)&&(s(this,f).terminate(),I(this,f,null),this.loaded=!1)});E(this,"writeFile",(e,r,{signal:o}={})=>{let n=[];return r instanceof Uint8Array&&n.push(r.buffer),s(this,c).call(this,{type:a.WRITE_FILE,data:{path:e,data:r}},n,o)});E(this,"mount",(e,r,o)=>{let n=[];return s(this,c).call(this,{type:a.MOUNT,data:{fsType:e,options:r,mountPoint:o}},n)});E(this,"unmount",e=>{let r=[];return s(this,c).call(this,{type:a.UNMOUNT,data:{mountPoint:e}},r)});E(this,"readFile",(e,r="binary",{signal:o}={})=>s(this,c).call(this,{type:a.READ_FILE,data:{path:e,encoding:r}},void 0,o));E(this,"deleteFile",(e,{signal:r}={})=>s(this,c).call(this,{type:a.DELETE_FILE,data:{path:e}},void 0,r));E(this,"rename",(e,r,{signal:o}={})=>s(this,c).call(this,{type:a.RENAME,data:{oldPath:e,newPath:r}},void 0,o));E(this,"createDir",(e,{signal:r}={})=>s(this,c).call(this,{type:a.CREATE_DIR,data:{path:e}},void 0,r));E(this,"listDir",(e,{signal:r}={})=>s(this,c).call(this,{type:a.LIST_DIR,data:{path:e}},void 0,r));E(this,"deleteDir",(e,{signal:r}={})=>s(this,c).call(this,{type:a.DELETE_DIR,data:{path:e}},void 0,r))}on(e,r){e==="log"?s(this,u).push(r):e==="progress"&&s(this,w).push(r)}off(e,r){e==="log"?I(this,u,s(this,u).filter(o=>o!==r)):e==="progress"&&I(this,w,s(this,w).filter(o=>o!==r))}};f=new WeakMap,m=new WeakMap,l=new WeakMap,u=new WeakMap,w=new WeakMap,N=new WeakMap,c=new WeakMap});var G=p(()=>{$()});var Y,H,X=p(()=>{Y=new Error("failed to get response body reader"),H=new Error("failed to complete download")});var V,z=p(()=>{V="Content-Length"});var oe,A,J=p(()=>{X();z();oe=(t,e)=>_(void 0,null,function*(){var n;let r=yield fetch(t),o;try{let i=parseInt(r.headers.get(V)||"-1"),L=(n=r.body)==null?void 0:n.getReader();if(!L)throw Y;let R=[],d=0;for(;;){let{done:D,value:U}=yield L.read(),T=U?U.length:0;if(D){if(i!=-1&&i!==d)throw H;e&&e({url:t,total:i,received:d,delta:T,done:D});break}R.push(U),d+=T,e&&e({url:t,total:i,received:d,delta:T,done:D})}let O=new Uint8Array(d),b=0;for(let D of R)O.set(D,b),b+=D.length;o=O.buffer}catch(i){console.log("failed to send download progress event: ",i),o=yield r.arrayBuffer(),e&&e({url:t,total:o.byteLength,received:o.byteLength,delta:0,done:!0})}return o}),A=(t,e,r=!1,o)=>_(void 0,null,function*(){let n=r?yield oe(t,o):yield(yield fetch(t)).arrayBuffer(),i=new Blob([n],{type:e});return URL.createObjectURL(i)})});var ae=te(K=>{G();J();var g=null;self.addEventListener("message",t=>_(K,null,function*(){let{command:e,args:r}=t.data;switch(e){case"load":yield se();break;case"run":if(g&&Array.isArray(r)){let o=yield g.exec(r);self.postMessage({result:o})}break;default:console.error(`Unknown command: ${e}`)}}));function se(){return _(this,null,function*(){try{if(g===null){g=new y;let t="./core-mt",e={classWorkerURL:yield A(`${t}/worker.js`,"text/javascript"),coreURL:yield A(`${t}/ffmpeg-core.js`,"text/javascript"),wasmURL:yield A(`${t}/ffmpeg-core.wasm`,"application/wasm"),workerURL:yield A(`${t}/ffmpeg-core.worker.js`,"text/javascript")};yield g.load(e),self.postMessage({status:"loaded"})}else self.postMessage({status:"already-loaded"})}catch(t){self.postMessage({status:"error",message:t})}})}});ae();})();
//# sourceMappingURL=worker.js.map
